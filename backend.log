[dotenv@17.2.1] injecting env (5) from .env -- tip: 🛠️  run anywhere with `dotenvx run -- yourcommand`
❌ OpenAI API key not configured - AI analysis will use mock responses
Tax & Law AI Expert server running on http://localhost:3001
Make sure to set your OPENAI_API_KEY and TAVILY_API_KEY environment variables
Connected to PostgreSQL database
Database schema initialized successfully
Database initialized successfully
Upload request received
File received: test_lohnsteuer.pdf 1593 bytes
Starting text extraction
Starting text extraction for test_lohnsteuer.pdf (application/pdf)
Processing PDF buffer: test_lohnsteuer.pdf (1593 bytes)
🔍 Attempting reliable PDF text extraction...
🔍 Starting reliable PDF text extraction for: test_lohnsteuer.pdf
🚫 Python extraction disabled in production environment
📚 Attempting pdf-parse extraction...
⚠️ pdf-parse failed: ENOENT: no such file or directory, open './test/data/05-versions-space.pdf'
🔄 Retrying pdf-parse with different options...
⚠️ pdf-parse retry also failed: ENOENT: no such file or directory, open './test/data/05-versions-space.pdf'
🔍 Attempting basic text extraction...
✅ Basic extraction found 97 characters
✅ Successfully extracted 97 characters from PDF
Successfully extracted 151 characters from test_lohnsteuer.pdf
Attempting to save document to database
Document saved to database with ID: 10
📊 Storing document 10 in Qdrant...
Error generating embedding: TypeError: Cannot read properties of null (reading 'embeddings')
    at generateEmbedding (file:///workspace/0711-Steuerberater/api/index.js:117:35)
    at storeDocumentInQdrant (file:///workspace/0711-Steuerberater/api/index.js:134:29)
    at file:///workspace/0711-Steuerberater/api/index.js:938:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
❌ Error storing document 10 in Qdrant: TypeError: Cannot read properties of null (reading 'embeddings')
    at generateEmbedding (file:///workspace/0711-Steuerberater/api/index.js:117:35)
    at storeDocumentInQdrant (file:///workspace/0711-Steuerberater/api/index.js:134:29)
    at file:///workspace/0711-Steuerberater/api/index.js:938:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Failed to store in Qdrant (non-critical): TypeError: Cannot read properties of null (reading 'embeddings')
    at generateEmbedding (file:///workspace/0711-Steuerberater/api/index.js:117:35)
    at storeDocumentInQdrant (file:///workspace/0711-Steuerberater/api/index.js:134:29)
    at file:///workspace/0711-Steuerberater/api/index.js:938:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Sending response
